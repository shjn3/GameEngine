(()=>{"use strict";var t={258:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(230)),r=a(i(359)),n=a(i(706)),o=a(i(294)),h=a(i(22));class l{constructor(){}image(t,e,i,a,s){let n=r.default.arrImage.filter((t=>t.getName()===s));if(n[0]){let r=new o.default,h=n[0].getImage();return r.setName(s),r.setPosition(t,e),r.setWidth(i),r.setHeight(a),r.setIsDraw(!0),r.image=h,r.key=Math.floor(Math.random()*Date.now()),l.arrDrawImage.push(r),r}return new o.default}imageSprite(t,e,i,a,s,n){let o=new h.default,d=r.default.arrImageSprite.filter((t=>t.getName()===s));if(d[0]&&d[0].frameInSprite.length>0){let s=d[0].frameInSprite.filter((t=>t.key===n));s[0]&&(o.setFrameInSprite(s),o.setHeight(a),o.setWidth(i),o.setPosition(t,e),o.image=d[0].image,o.isDraw=!0,o.key=Math.floor(Math.random()*Date.now()),l.arrDrawImageSprite.push(o))}return o}spriteSheet(t,e,i,a,n){let o=new s.default,h=-1;if(r.default.arrImageSprite.forEach(((t,e)=>{t.getName()!==n||(h=e)})),-1!==h){let s={image:r.default.arrImageSprite[h].image,frameInSprite:r.default.arrImageSprite[h].frameInSprite,x:t,y:e,width:i,height:a,frames:[]};o.drawSingleAnimation=s}return o}text(t,e,i,a,s="Arial",r=13){let o=new n.default;return o.setName(t),o.setPosition(e,i),o.setFont(s),o.setSize(r),o.setText(a),o.key=Math.floor(Math.random()*Date.now()),l.arrText.push(o),o}}e.default=l,l.arrText=[],l.arrDrawImage=[],l.arrDrawImageSprite=[]},230:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(628));class r{constructor(){this.nameAnimation="",this.key=Math.floor(Math.random()*Date.now())}create(t){let e=JSON.parse(JSON.stringify(t));r.arrConfigAnimation.push(e)}play(t){if(this.nameAnimation!==t){if(r.arrConfigAnimation.length>0){r.arrDrawAnimation=r.arrDrawAnimation.filter((t=>t.key!==this.key));let e=r.arrConfigAnimation.filter((e=>e.key===t));if(e[0]){let{frames:i,frameRate:a,repeat:n}=e[0];if(this.drawSingleAnimation){let e=[],o=i.length;this.drawSingleAnimation.frameInSprite.forEach((t=>{for(let a=0;a<o;a++)if(t.key===i[a]){e.push(t);break}})),this.drawSingleAnimation.frames=e;let h=new s.default;h.frameRate=a,h.repeat=n,h.drawImage=this.drawSingleAnimation,h.name=t,h.key=this.key,r.arrDrawAnimation.push(h)}}}this.nameAnimation=t}}destroy(){r.arrDrawAnimation=r.arrDrawAnimation.filter((t=>t.key!==this.key))}}e.default=r,r.arrDrawAnimation=[],r.arrConfigAnimation=[]},628:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.repeat=-1,this.frameRate=60,this.mainFrame=0,this.timer=0,this.name="",this.key=0}}},758:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.position={x:0,y:0},this.width=0,this.height=0}setPosition(t,e){this.position={x:t,y:e}}setWidth(t){this.width=t}setHeight(t){this.height=t}getPosition(){return this.position}getWidth(){return this.width}getHeight(){return this.height}}},923:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t={}){const{width:e,height:a,parent:s,scenes:r=[]}=t;i.canvas=document.querySelector(`#${s} canvas`),i.canvas.width=e,i.canvas.height=a,i.ctx=i.canvas.getContext("2d"),r.length>0&&r.forEach((t=>i.arrScenes.push(new t))),this.init()}init(){i.arrScenes[0].setIsActive(!0),i.arrScenes[0].active()}}e.default=i,i.arrScenes=[]},294:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(258)),r=a(i(758));class n extends r.default{constructor(){super(),this.name="",this.image=new Image,this.key=0,this.isDraw=!1}setKey(t){this.key=t}getKey(){return this.key}setIsDraw(t){this.isDraw=t}getIsDraw(){return this.isDraw}setName(t){this.name=t}setImage(t){this.image.src=t}getName(){return this.name}getImage(){return this.image}destroy(){s.default.arrDrawImage=s.default.arrDrawImage.filter((t=>t.key!==this.key))}}e.default=n},22:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(258)),r=a(i(758));class n extends r.default{constructor(){super(),this.frameInSprite=[],this.name="",this.image=new Image,this.key=0,this.isDraw=!1}setKey(t){this.key=t}getKey(){return this.key}setIsDraw(t){this.isDraw=t}getIsDraw(){return this.isDraw}setName(t){this.name=t}setImage(t){this.image.src=t}getName(){return this.name}getImage(){return this.image}getFrameInSprite(){return JSON.parse(JSON.stringify(this.frameInSprite))}setFrameInSprite(t){this.frameInSprite=JSON.parse(JSON.stringify(t))}destroy(){s.default.arrDrawImageSprite=s.default.arrDrawImageSprite.filter((t=>t.key!==this.key))}}e.default=n},829:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(923));e.default=class{constructor(){}keydown(t,e){window.addEventListener("keydown",(i=>{i.key===t&&e()}))}keyup(t,e){window.addEventListener("keyup",(i=>{i.key===t&&e()}))}onClick(t){s.default.canvas.addEventListener("click",t)}removeOnClick(t){s.default.canvas.removeEventListener("click",t,!1)}}},359:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(294)),r=a(i(22));class n{constructor(){}image(t,e){let i=new s.default;i.setName(t),i.setImage(e),i.setKey(Math.floor(Math.random()*Date.now())),n.arrImage.push(i)}imageSprite(t,e,i){let a=new r.default;a.setName(t),a.setImage(e),a.setFrameInSprite(i),a.setKey(Math.floor(Math.random()*Date.now())),n.arrImageSprite.push(a)}}e.default=n,n.arrImage=[],n.arrImageSprite=[]},51:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(359)),r=a(i(923)),n=a(i(258)),o=a(i(230)),h=a(i(829));e.default=class{constructor(t=""){this.load=new s.default,this.add=new n.default,this.animation=new o.default,this.input=new h.default,this.idRequestAnimation=0,this.isActive=!1,this.nameScenes=t}setIsActive(t){this.isActive=t}active(){this.preload(),this.create(),this.loop()}preload(){}create(){}draw(){n.default.arrDrawImage.length>0&&n.default.arrDrawImage.forEach((t=>{if(t.isDraw){let e=t.getImage(),{x:i,y:a}=t.getPosition(),s=t.getWidth(),n=t.getHeight();r.default.ctx.beginPath(),r.default.ctx.drawImage(e,i,a,s,n)}})),n.default.arrDrawImageSprite.length>0&&n.default.arrDrawImageSprite.forEach((t=>{t.isDraw&&(r.default.ctx.beginPath(),r.default.ctx.drawImage(t.image,t.frameInSprite[0].sPosition.x,t.frameInSprite[0].sPosition.y,t.frameInSprite[0].sWidth,t.frameInSprite[0].sHeight,t.position.x,t.position.y,t.width,t.height))})),o.default.arrDrawAnimation.length>0&&o.default.arrDrawAnimation.forEach((t=>{t.timer++,t.timer>1e3/t.frameRate&&(t.timer=0,t.drawImage.frames.length>1&&(t.mainFrame+1===t.drawImage.frames.length?t.mainFrame=0:t.mainFrame++)),r.default.ctx.drawImage(t.drawImage.image,t.drawImage.frames[t.mainFrame].sPosition.x,t.drawImage.frames[t.mainFrame].sPosition.y,t.drawImage.frames[t.mainFrame].sWidth,t.drawImage.frames[t.mainFrame].sHeight,t.drawImage.x,t.drawImage.y,t.drawImage.width,t.drawImage.height)})),n.default.arrText.length>0&&n.default.arrText.forEach((t=>{let e=t.getText(),i=t.getSize(),a=t.getFont(),{x:s,y:n}=t.getPosition();r.default.ctx.beginPath(),r.default.ctx.font=`${i}px ${a}`,r.default.ctx.fillText(`${e}`,s,n)}))}update(){}loop(){this.idRequestAnimation=window.requestAnimationFrame((()=>this.loop())),r.default.ctx.clearRect(0,0,r.default.canvas.width,r.default.canvas.height),this.draw(),this.update()}changeScenes(t){o.default.arrConfigAnimation=[],n.default.arrDrawImageSprite=[],n.default.arrText=[],n.default.arrDrawImage=[],o.default.arrDrawAnimation=[],r.default.ctx.clearRect(0,0,r.default.canvas.width,r.default.canvas.height),this.draw(),this.isActive=!1,window.cancelAnimationFrame(this.idRequestAnimation);let e=r.default.arrScenes.length;for(let i=0;i<e;i++)t===r.default.arrScenes[i].nameScenes&&(r.default.arrScenes[i].setIsActive(!0),r.default.arrScenes[i].active())}}},706:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(258)),r=a(i(758));class n extends r.default{constructor(){super(),this.text="",this.font="Arial",this.size=13,this.name="",this.key=0,this.isVisible=!1}setIsVisible(t){this.isVisible=t}getIsVisible(){return this.isVisible}destroy(){s.default.arrText=s.default.arrText.filter((t=>t.key===this.key))}setName(t){this.name=t}getName(){return this.name}setText(t){this.text=t}getText(){return this.text}setFont(t){this.font=t}getFont(){return this.font}setSize(t){this.size=t}getSize(){return this.size}}e.default=n},819:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(51)),r=a(i(230)),n=a(i(294)),o=a(i(22)),h=a(i(706));class l extends s.default{constructor(){super("play"),this.maxCloud=6,this.btnStart=new n.default,this.btnRestart=new o.default,this.txtGameOver=new o.default,this.arrCloud=[],this.player=new r.default,this.obstaclesCactus=[],this.obstaclesPTerodactyl=[],this.jumpVelocity=-13,this.gameOver=!1,this.score=0,this.arrGround=[],this.textScore=new h.default,this.textHightScore=new h.default,this.heightScore=0,this.timer=0,this.velocity=-3}preload(){}create(){this.createGround(),this.createCloud(),this.createPlayer(),this.createObstacles(),this.createScore(),this.createEvent(),this.createGameOver()}createGameOver(){this.btnRestart=this.add.imageSprite(400,150,70,60,"mainSprite","btnRestart"),this.btnRestart.setIsDraw(!1),this.txtGameOver=this.add.imageSprite(300,110,270,20,"mainSprite","txtGameOver"),this.txtGameOver.setIsDraw(!1)}createScore(){this.textScore=this.add.text("TextForScore",600,30,"Score: 0","Arial",20),this.textHightScore=this.add.text("TextForScore",600,60,`Hight Score: ${this.heightScore}`,"Arial",20)}createGround(){this.arrGround.push(this.add.imageSprite(0,320,1600,30,"mainSprite","ground")),this.arrGround.push(this.add.imageSprite(1600,320,1600,30,"mainSprite","ground"))}createCloud(){this.arrCloud.push(this.add.imageSprite(800,0,100,50,"mainSprite","cloud"))}createPlayer(){this.player=this.add.spriteSheet(15,290,60,70,"mainSprite"),this.animation.create({key:"RunPlayer",frames:["run1","run2"],frameRate:60,repeat:-1}),this.animation.create({key:"DuckPlayer",frames:["duck1","duck2"],frameRate:60,repeat:-1}),this.animation.create({key:"JumpPlayer",frames:["jump"],frameRate:60,repeat:-1}),this.animation.create({key:"DiePlayer",frames:["die"],frameRate:60,repeat:-1}),this.player.drawSingleAnimation.y=290,this.player.play("RunPlayer")}createEvent(){this.input.keydown(" ",(()=>{"RunPlayer"===this.player.nameAnimation&&this.player.play("JumpPlayer")})),this.input.keydown("ArrowUp",(()=>{"RunPlayer"===this.player.nameAnimation&&this.player.play("JumpPlayer")})),this.input.keydown("ArrowDown",(()=>{"RunPlayer"===this.player.nameAnimation&&(this.player.drawSingleAnimation.y=295,this.player.drawSingleAnimation.width=70,this.player.drawSingleAnimation.height=55,this.player.play("DuckPlayer"))})),this.input.keyup("ArrowDown",(()=>{"DuckPlayer"===this.player.nameAnimation&&(this.player.drawSingleAnimation.y=290,this.player.drawSingleAnimation.width=60,this.player.drawSingleAnimation.height=70,this.player.play("RunPlayer"))})),this.input.onClick((t=>{this.gameOver&&t.offsetX>400&&t.offsetX<470&&t.offsetY>150&&t.offsetY<210&&(this.gameOver=!1,this.arrCloud=[],this.arrGround=[],this.obstaclesPTerodactyl=[],this.obstaclesCactus=[],this.score=0,this.timer=0,this.changeScenes("start"))}))}createObstacles(){this.animation.create({key:"PTerodactyl",frames:["PTerodactyl1","PTerodactyl2"],frameRate:30,repeat:-1}),this.obstaclesPTerodactyl.push(this.add.spriteSheet(1e3,265,50,30,"mainSprite")),this.obstaclesPTerodactyl[0].play("PTerodactyl")}update(){this.gameOver?(this.updateHightScore(),this.btnRestart.setIsDraw(!0),this.txtGameOver.setIsDraw(!0)):(this.updateGround(),this.updateScore(),this.updateObstacles(),this.updateCloud(),this.updatePlayerJump(),this.CollisionDetection())}updateGround(){this.arrGround.length>0&&(this.arrGround[0].position.x+=this.velocity,this.arrGround[1].position.x+=this.velocity,this.arrGround[0].position.x<-1600&&(this.arrGround[0].destroy(),this.arrGround.splice(0,1),this.arrGround.push(this.add.imageSprite(1600,320,1600,30,"mainSprite","ground"))))}updateHightScore(){this.heightScore=Math.max(this.heightScore,this.score),this.textHightScore.setText(`Hight Score: ${this.heightScore}`)}updateScore(){this.timer++,this.timer>50&&(this.timer=0,this.score++,this.textScore.setText(`Score: ${this.score}`))}updateObstacles(){let t=this.obstaclesCactus.length,e=this.obstaclesPTerodactyl.length;t>0&&this.obstaclesCactus.forEach((t=>t.position.x+=this.velocity)),e>0&&this.obstaclesPTerodactyl.forEach((t=>t.drawSingleAnimation.x+=this.velocity-1));let i=0;if(t>0&&e>0?i=Math.max(this.obstaclesCactus[t-1].position.x+this.obstaclesCactus[t-1].width,this.obstaclesPTerodactyl[e-1].drawSingleAnimation.x+this.obstaclesPTerodactyl[e-1].drawSingleAnimation.width):t>0&&0===e?i=this.obstaclesCactus[t-1].position.x+this.obstaclesCactus[t-1].width:0===t&&e>0&&(i=this.obstaclesPTerodactyl[e-1].drawSingleAnimation.x+this.obstaclesPTerodactyl[e-1].drawSingleAnimation.width),i+this.getRandom(300,600)<800)switch(this.getRandom(1,2)){case 1:1===this.getRandom(2,3)?this.obstaclesCactus.push(this.add.imageSprite(800,295,30,45,"mainSprite","cactusSmall")):this.obstaclesCactus.push(this.add.imageSprite(800,285,30,60,"mainSprite","cactusLarge"));break;case 2:let t=[290,265,240],i=this.getRandom(0,2);this.obstaclesPTerodactyl.push(this.add.spriteSheet(800,t[i],50,30,"mainSprite")),this.obstaclesPTerodactyl[e].play("PTerodactyl")}this.obstaclesCactus.length>0&&this.obstaclesCactus[0].position.x+this.obstaclesCactus[0].width<0&&(this.obstaclesCactus[0].destroy(),this.obstaclesCactus.splice(0,1)),this.obstaclesPTerodactyl.length>0&&this.obstaclesPTerodactyl[0].drawSingleAnimation.x+this.obstaclesPTerodactyl[0].drawSingleAnimation.width<0&&(this.obstaclesPTerodactyl[0].destroy(),this.obstaclesPTerodactyl.splice(0,1))}updatePlayerJump(){"JumpPlayer"===this.player.nameAnimation&&(this.jumpVelocity+=.33,this.player.drawSingleAnimation.y+=this.jumpVelocity,this.player.drawSingleAnimation.y>290&&(this.jumpVelocity=-13,this.player.drawSingleAnimation.y=290,this.player.play("RunPlayer")))}CollisionDetection(){this.obstaclesCactus.length>0&&this.obstaclesCactus[0].position.x+this.obstaclesCactus[0].width>this.player.drawSingleAnimation.x&&this.obstaclesCactus[0].position.x<this.player.drawSingleAnimation.x+this.player.drawSingleAnimation.width&&this.obstaclesCactus[0].position.y+this.obstaclesCactus[0].height>this.player.drawSingleAnimation.y&&this.obstaclesCactus[0].position.y<this.player.drawSingleAnimation.y+this.player.drawSingleAnimation.height&&(this.gameOver=!0,this.player.play("DiePlayer")),this.obstaclesPTerodactyl.length>0&&void 0!==this.player.drawSingleAnimation&&this.obstaclesPTerodactyl[0].drawSingleAnimation.x+this.obstaclesPTerodactyl[0].drawSingleAnimation.width>this.player.drawSingleAnimation.x&&this.obstaclesPTerodactyl[0].drawSingleAnimation.x<this.player.drawSingleAnimation.x+this.player.drawSingleAnimation.width&&this.obstaclesPTerodactyl[0].drawSingleAnimation.y+this.obstaclesPTerodactyl[0].drawSingleAnimation.height>this.player.drawSingleAnimation.y&&this.obstaclesPTerodactyl[0].drawSingleAnimation.y<this.player.drawSingleAnimation.y+this.player.drawSingleAnimation.height&&(this.gameOver=!0,this.player.play("DiePlayer"))}updateCloud(){if(this.arrCloud.length>0){if(this.arrCloud.forEach((t=>t.position.x+=this.velocity)),this.arrCloud.length<this.maxCloud&&this.arrCloud[this.arrCloud.length-1].position.x+this.arrCloud[this.arrCloud.length-1].width<this.getRandom(500,800)){let t=this.getRandom(40,100),e=this.getRandom(0,250),i=this.add.imageSprite(800,e,t,t/1.5,"mainSprite","cloud");this.arrCloud.push(i)}this.arrCloud[0].position.x+this.arrCloud[0].width<0&&(this.arrCloud[0].destroy(),this.arrCloud.splice(0,1))}}getRandom(t,e){return Math.floor(Math.random()*(e-t+1))+t}}e.default=l},552:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(51));class r extends s.default{constructor(){super("start"),this.onClickStart=t=>this.handleClickStart(t)}preload(){this.load.image("btnStart","./assets/PlayButton.png"),this.load.imageSprite("mainSprite","./assets/sprite.png",[{key:"run1",sPosition:{x:1511,y:0},sWidth:95,sHeight:110},{key:"run2",sPosition:{x:1599,y:0},sWidth:95,sHeight:110},{key:"cloud",sPosition:{x:165,y:0},sWidth:100,sHeight:30},{key:"ground",sPosition:{x:0,y:100},sWidth:2400,sHeight:30},{key:"dinos",sPosition:{x:75,y:0},sWidth:100,sHeight:110},{key:"duck1",sPosition:{x:1862,y:0},sWidth:120,sHeight:90},{key:"duck2",sPosition:{x:1982,y:0},sWidth:120,sHeight:90},{key:"jump",sPosition:{x:1335,y:0},sWidth:95,sHeight:110},{key:"die",sPosition:{x:1335,y:0},sWidth:95,sHeight:110},{key:"cactusSmall",sPosition:{x:616,y:0},sWidth:34,sHeight:70},{key:"cactusLarge",sPosition:{x:650,y:0},sWidth:50,sHeight:80},{key:"PTerodactyl1",sPosition:{x:260,y:0},sWidth:90,sHeight:70},{key:"PTerodactyl2",sPosition:{x:350,y:0},sWidth:90,sHeight:70},{key:"btnRestart",sPosition:{x:0,y:0},sWidth:75,sHeight:70},{key:"txtGameOver",sPosition:{x:955,y:25},sWidth:380,sHeight:30}])}create(){this.add.image(350,150,100,100,"btnStart"),this.add.text("TextForStart",320,270,"Click to start","Arial",30),this.add.imageSprite(0,320,1600,30,"mainSprite","ground"),this.add.imageSprite(15,282,60,70,"mainSprite","dinos"),this.input.onClick(this.onClickStart)}handleClickStart(t){t.offsetX>350&&t.offsetX<450&&t.offsetY>150&&t.offsetY<250&&(this.changeScenes("play"),this.input.removeOnClick(this.onClickStart))}}e.default=r},731:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0;const s=a(i(552)),r=a(i(819));let n={width:800,height:400,parent:"parentCanvas",scenes:[s.default,r.default]};e.config=n},607:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=a(i(923)),r=i(731);new s.default(r.config)}},e={};!function i(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,i),r.exports}(607)})();